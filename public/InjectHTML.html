<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <script src="https://cdn-script.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    CONTENT CUSTOM
    <div id="output"></div>
    <script>

        $(document).ready(function () {
            try {
                dhis2 = { ...dhis2, ...customDhis2 }
            } catch (e) {
                var dhis2 = customDhis2 || {}
            }

            console.log('ready', dhis2)
        });

        window.document.addEventListener('ireportInjected', function (event) {
            console.log("ireportInjected::  window?.ireport:", window?.ireport)
            console.log("event.detail", event.detail);
            main();
        });



        function main() {
            var message = JSON.stringify(window?.dhis2);
            document.getElementById("output").innerHTML = message;
            console.log('asdfasdfsad')
            alert('12312312');

            (async () => {
                const a = await event.detail._get('/api/me.json');
                console.log(a)
            })();
            setTimeout(() => {
                const htmlString = `
                <tr>
                <td>
                    data3
                </td>
                <td>
                    data4
                </td>
            </tr>
                `;
                const bodyElement = $('#data-table body');

                bodyElement.append(htmlString)
            }, 5000)
        }

    </script>

    <table id="data-table" style="border:1px solid black; width: 100vw;">
        asfasdfa
        <thead>
            <tr>
                <th>col1</th>
                <th>col2</th>
            </tr>
        </thead>

        <body>
            <tr>
                <td>
                    data1
                </td>
                <td>
                    data2
                </td>
            </tr>
        </body>
    </table>
</body>

</html>